\begin{definition}[Adjacency Matrix of a Function]
\label{def:func_matrix}
\lean{func_matrix}
\leanok
Let $f: \mathbb{Z}/n\mathbb{Z} \to \mathbb{Z}/n\mathbb{Z}$ be any function. The function $f$ is represented by an 
$n \times n$ adjacency matrix $A=A_f$, where the entry 
$a_{ij} = \delta_{f(i),j}$ 
and $\delta_{i,j}$ is the Kronecker delta.
With this convention, each row of $A$ contains exactly one non-zero entry.
\end{definition}

\begin{lemma}
\label{lem:func_matrix_eq}
\lean{func_matrix_eq}
\leanok
Let $f: \mathbb{Z}/n\mathbb{Z} \to \mathbb{Z}/n\mathbb{Z}$ be any function and $A=A_f$ be the adjacency matrix of the function $f$. 
Then for all $i\in \{0,1,\ldots,n-1\}$ and $y\in \mathbb{Z}^n$
$$(A y)_i = y_{f(i)}.$$
\end{lemma}

\begin{proof}
\uses{def:func_matrix}
The proof follows from the Definition \ref{def:func_matrix}.
$$(A y)_i = \sum_{j=0}^{n-1} a_{ij} y_j = \sum_{j=0}^{n-1} \delta_{f(i),j} y_j = y_{f(i)}$$
\end{proof}

\begin{lemma}
\label{lem:adj_eq}
\lean{adj_eq}
\leanok
Let $f: \mathbb{Z}/n\mathbb{Z} \to \mathbb{Z}/n\mathbb{Z}$ be any function and $A=A_f$ be the adjacency matrix of the function $f$. 
Let $v\in \mathbb{Z}^n$, $y = \operatorname{adj}(x I - A) v$ and $m = \det(x I - A)$. Then for all $i\in \{0,1,\ldots,n-1\}$
$$y_{f(i)} = x y_i - m v_i.$$
\end{lemma}

\begin{proof}
\uses{lem:func_matrix_eq}
For adjugate matrix we have identity 
$(x I - A) \operatorname{adj} (x I - A) = \det(x I - A) I$.
Therefore,
$$m v = \det(x I - A) v = (x I - A) \operatorname{adj} (x I - A) v 
= (x I - A) y = x y - A y.$$
The final equality follows from the Lemma \ref{lem:func_matrix_eq}.
\end{proof}

\begin{lemma}
\label{lem:det_degree_le_sum_degrees}
\lean{det_degree_le_sum_degrees}
\leanok
Let $M$ be an $n \times n$ matrix with polynomial entries $m_{ij} \in \mathbb{Z}[x]$.
Then 
$$\deg(\det(M)) \leq \sum_{i=0}^{n-1} \sum_{j=0}^{n-1} \deg(m_{ij}).$$
\end{lemma}

\begin{proof}
The determinant is a sum over permutations $\sigma$ of products $\prod_{i=0}^{n-1} m_{\sigma(i),i}$.
Each product has degree at most $\sum_{i=0}^{n-1} \deg(m_{\sigma(i),i})$.
Since a single element of a sum is at most the whole sum (when all terms are non-negative), 
this is bounded by $\sum_{i=0}^{n-1} \sum_{j=0}^{n-1} \deg(m_{ij})$.
The degree of a sum is at most the maximum degree of its summands.
\end{proof}

\begin{lemma}
\label{lem:charmatrix_helpers}
\lean{charmatrix_det_eq_charpoly, charmatrix_det_monic, charmatrix_det_natDegree}
\leanok
Let $A$ be an $n \times n$ matrix with integer entries. The characteristic matrix $\chi_A(x) = x I - A$ has determinant equal to the characteristic polynomial:
$$\det(\chi_A(x)) = \det(x \cdot I - A)$$
For all $n \in N$, this polynomial is monic of degree $n$.
\end{lemma}

\begin{proof}
This follows from the standard properties of the characteristic polynomial.
\end{proof}

\begin{lemma}
\label{lem:adj_poly}
\lean{adj_poly}
\uses{def:func_matrix, lem:det_degree_le_sum_degrees, lem:charmatrix_helpers}
Let $M = M(x) = \operatorname{adj}(x I - A)$ be the adjugate of the characteristic matrix $x I - A$.
Then the matrix entries $m_{ij} = p_{ij}(x)$ are polynomials in $x$ for all $i,j\in \{0,1,\ldots,n-1\}$ such that
\begin{itemize}
\item $p_{ii}(x)$ is monic of degree $n-1$ for all $i\in \{0,1,\ldots,n-1\}$ and
\item $p_{ij}(x)$ has degree at most $n-2$ for all $i\neq j\in \{0,1,\ldots,n-1\}$.
\end{itemize}
\end{lemma}

\begin{proof}
\uses{lem:det_degree_le_sum_degrees, lem:charmatrix_helpers}
The diagonal entries of $\operatorname{adj}(x I - A)$ are characteristic polynomials of $(n-1) \times (n-1)$ submatrices, hence monic of degree $n-1$ by Lemma \ref{lem:charmatrix_helpers}. 

For the off-diagonal entries, we note that when we compute $\operatorname{adj}(x I - A)_{ij}$ for $i \neq j$, 
we remove row $j$ and column $i$ from the characteristic matrix. The resulting matrix has 
all entries of degree 0 besides $n-2$ diagonal entries of degree 1 from $x \cdot I$, since diagonal entries $ii$ and $jj$ were removed.
By Lemma \ref{lem:det_degree_le_sum_degrees}, the determinant (and hence the adjugate entry) has degree at most $n-2$.
\end{proof}

\begin{lemma}
\label{lem:polynomial_positive_for_large}
\lean{polynomial_positive_for_large}
\leanok
If $p \in \mathbb{Z}[x]$ has positive leading coefficient, then $p(n) > 0$ for all sufficiently large integers $n$.
\end{lemma}

\begin{proof}
Write $p(n) = an^d + r(n)$ where $a > 0$ is the leading coefficient of $p$, $d = \deg(p)$, and $\deg(r) < d$.
For $n \geq 1$, we have $|r(n)| \leq B \cdot n^{d-1}$ where $B = \sum_{k < d} |p_k|$.
Choose $n_0 = \max(1, B)$. For $n > n_0$:
$$p(n) = an^d + r(n) \geq an^d - Bn^{d-1} = n^{d-1}(an - B) > 0$$
since $a \geq 1$ being a positive integer and $n > B$.
\end{proof}

\begin{lemma}
\label{lem:adj_poly_strict_increasing}
\lean{adj_poly_strict_increasing}
\uses{lem:adj_poly, lem:polynomial_positive_for_large}
Let $M = (m_{ij}) = M(x) = \operatorname{adj}(x I - A)$ be the adjugate of the characteristic matrix $x\cdot I - A$.
Let $v = (0,1,\ldots,n-1)^T$ and $m = m(x) = \det(x I - A)$. Then for sufficiently large integer $x$:
$$0 \le y_0 < y_1 < \cdots < y_{n-1} < m$$
\end{lemma}

\begin{proof}
\uses{lem:adj_poly, lem:polynomial_positive_for_large, lem:charmatrix_helpers}
The proof follows from Lemma \ref{lem:adj_poly} and Lemma \ref{lem:polynomial_positive_for_large}.
Let $y = Mv$. Then $y_i = \sum_{k=0}^{n-1} m_{ik} k$.

For each entry $y_i$, we express it as evaluation of a polynomial $p_i(x) = \sum_{k=0}^{n-1} m_{ik}(x) k \in \mathbb{Z}[x]$.
By Lemma \ref{lem:adj_poly}, the diagonal entry $m_{ii}$ is monic of degree $n-1$, while off-diagonal entries $m_{ik}$ (for $k \neq i$) have degree at most $n-2$.
Therefore, the leading coefficient of $p_i$ is non-negative (dominated by the $m_{ii} i$ term with $i \geq 0$).

For the difference $p_j - p_i$ with $j > i$, the leading term comes from $(m_{jj} j - m_{ii} i)$. Since both $m_{jj}$ and $m_{ii}$ are monic of degree $n-1$, the leading coefficient of $p_j - p_i$ is $j - i > 0$.

Similarly, for $p_m(x) = \det(x I - A) - p_i(x)$, since $\det(x I - A)$ is monic of degree $n$ (by Lemma \ref{lem:charmatrix_helpers}) and $p_i$ has degree at most $n-1$, the leading coefficient is 1.

Applying Lemma \ref{lem:polynomial_positive_for_large} to these polynomials with positive leading coefficients gives the existence of $x_0$ such that all required inequalities hold for $x > x_0$.
\end{proof}

%linear representation definition
\begin{definition}[Linear Representation]
\label{def:linear_representation}
\lean{has_linear_representation}
\leanok
Let $f: \mathbb{Z}/n\mathbb{Z} \to \mathbb{Z}/n\mathbb{Z}$ be any function. A linear representation of $f$ is an injective function $j: \mathbb{Z}/n\mathbb{Z} \to \mathbb{Z}/m\mathbb{Z}$ 
such that for all $i\in \{0,1,\ldots,n-1\}$,
$$j(f(i)) = a \cdot j(i)$$
in $\mathbb{Z}/m\mathbb{Z}$, where $m$ is a positive integer and $a$ is a constant from $\mathbb{Z}/m\mathbb{Z}$ depending on $f$.
\end{definition}

\begin{theorem}[Main Theorem]
\label{thm:linear_representation}
\lean{linear_representation}
\leanok
\uses{def:func_matrix, lem:adj_eq, lem:adj_poly_strict_increasing, def:linear_representation}
Any finite function $f: \mathbb{Z}/n\mathbb{Z} \to \mathbb{Z}/n\mathbb{Z}$ has a linear representation.
\end{theorem}

\begin{proof}
\uses{lem:adj_eq, lem:adj_poly_strict_increasing}
Let us define $m = \det(x I - A)$, $a = x$ and $j(i) = y_i$ for $i \in \{0,1,\ldots,n-1\}$, where $y = Mv$ with $v = (0,1,\ldots,n-1)^T$. 
By Lemma \ref{lem:adj_poly_strict_increasing}, we can choose $x$ large enough such that:
$$0 \le y_0 < y_1 < \cdots < y_{n-1} < m$$

Since $m$ is monic of degree $n$, we can choose $x$ such that $x < m(x)$. This shows that $j$ is injective and $a \in \{0,1,\ldots,m-1\}$.

Lemma \ref{lem:adj_eq} shows that $y_{f(i)} = x\cdot y_i - m\cdot v_i$ and hence $y_{f(i)} \equiv x\cdot y_i \pmod{m}$.

Therefore, $j$ is a linear representation of $f$ with modulus $m$ and constant $a$.
\end{proof}

\subsection*{Examples}

\begin{example}[Quadratic Function in $\mathbb{Z}/3\mathbb{Z}$]
\label{ex:quadratic_Z3}
Consider the function $f: \mathbb{Z}/3\mathbb{Z} \to \mathbb{Z}/3\mathbb{Z}$ defined by $f(x) = x^2$.
This function maps:
\begin{align*}
0 &\mapsto 0 \\
1 &\mapsto 1 \\
2 &\mapsto 4 \equiv 1 \pmod{3}
\end{align*}
Despite being a non-linear function, Theorem \ref{thm:linear_representation} guarantees that $f$ has a linear representation.

The adjacency matrix is:
$$A_f = \begin{pmatrix}
1 & 0 & 0 \\
0 & 1 & 0 \\
0 & 1 & 0
\end{pmatrix}$$

The characteristic matrix is:
$$x \cdot I - A_f = \begin{pmatrix}
x-1 & 0 & 0 \\
0 & x-1 & 0 \\
0 & -1 & x
\end{pmatrix}$$

The characteristic polynomial is:
$$m = \det(x \cdot I - A_f) = (x-1)^2 \cdot x = x^3 - 2x^2 + x$$

The adjugate matrix is:
$$\operatorname{adj}(x \cdot I - A_f) = \begin{pmatrix}
x(x-1) & 0 & 0 \\
0 & x(x-1) & 0 \\
0 & (x-1) & (x-1)^2
\end{pmatrix}$$

Using vector $v = (0, 1, 2)^T$, we get:
$$y = \operatorname{adj}(x \cdot I - A_f) \cdot v = \begin{pmatrix}
x(x-1) \cdot 0 \\
x(x-1) \cdot 1 \\
(x-1) \cdot 1 + (x-1)^2 \cdot 2
\end{pmatrix} = \begin{pmatrix}
0 \\
x^2 - x \\
(x-1)(2x-1)
\end{pmatrix} = \begin{pmatrix}
0 \\
x^2 - x \\
2x^2 - 3x + 1
\end{pmatrix}$$

For $x = 4$, we compute:
\begin{align*}
y_0 &= 0 \\
y_1 &= 4^2 - 4 = 16 - 4 = 12 \\
y_2 &= 2(4^2) - 3(4) + 1 = 32 - 12 + 1 = 21 \\
m &= 4^3 - 2(4^2) + 4 = 64 - 32 + 4 = 36
\end{align*}

The injection $j: \mathbb{Z}/3\mathbb{Z} \to \mathbb{Z}/36\mathbb{Z}$ is defined by $j(i) = y_i$:
$$j(0) = 0, \quad j(1) = 12, \quad j(2) = 21$$

These values are strictly increasing and bounded by $m = 36$, so $j$ is injective.

We verify the linear representation property using Lemma \ref{lem:adj_eq}. 

The lemma states that $y_{f(i)} = x \cdot y_i - m \cdot v_i$, which we can rewrite as:
$$j(f(i)) \equiv x \cdot j(i) \pmod{m}.$$

Verification:
\begin{align*}
j(f(0)) = j(0) = 0 \equiv 4 \cdot 0 = 4 \cdot j(0) \pmod{36} \quad\checkmark \\
j(f(1)) = j(1) = 12 \equiv 4 \cdot 12 = 4 \cdot j(1) \pmod{36} \quad\checkmark \\
j(f(2)) = j(1) = 12 \equiv 48 \equiv 4 \cdot 21 = 4 \cdot j(2) \pmod{36} \quad\checkmark
\end{align*}

Thus $j(f(i)) \equiv 4 \cdot j(i) \pmod{36}$ for all $i \in \mathbb{Z}/3\mathbb{Z}$, confirming the quadratic function $f(x) = x^2$ has a linear representation with modulus $m = 36$ and multiplier $a = 4$.
\end{example}
